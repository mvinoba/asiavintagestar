<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Asia Vintage Star</title>
    <!-- Google font -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
       /* ====== BRAND SYSTEM & THEME ====== */
      :root{
          --pink-1: #FB72BC;
          --pink-2: #FC84CB;
          --pink-dark: #E44CA8;
          /* Slightly adjusted pinks for potentially better gradient look with transparency */
          --pink-1-rgb: 251, 114, 188;
          --pink-2-rgb: 252, 132, 203;
          --bg-light: #FFF8FC;
          --bg-card: rgba(255, 255, 255, 0.8); /* Slightly more opaque */
          --bg-card-loading: linear-gradient(
              100deg,
              rgba(255, 248, 252, 0.7) 40%, /* Slightly tinted version of bg-light */
              rgba(255, 255, 255, 0.9) 50%,
              rgba(255, 248, 252, 0.7) 60%
          ); /* Gradient for loading pulse */
          --txt-dark: #343434;
          --txt-light: #ffffff;
          --radius: 1rem;
          --shadow-base: 0 8px 25px rgba(0, 0, 0, 0.08);
          --shadow-hover: 0 14px 35px rgba(228, 76, 168, 0.2);
          --transition-speed: 0.4s;
          --transition-speed-fast: 0.2s; /* For tap feedback */
          --transition-ease: cubic-bezier(0.25, 0.8, 0.25, 1);
          --header-height: clamp(4rem, 10vw, 6rem); /* Approximate initial header height */
      }

      /* ====== RESET & BASE ====== */
      *, *::before, *::after {
          box-sizing: border-box;
          margin: 0;
          padding: 0;
      }

      html, body {
          height: 100%;
      }

      body {
          font-family: 'Poppins', sans-serif;
          background-color: var(--bg-light);
          background-image: radial-gradient(circle at 50% 0%, rgba(255,255,255,0.5) 0%, transparent 60%),
                            linear-gradient(180deg, var(--bg-light) 80%, #fff1f9 100%);
          color: var(--txt-dark);
          display: flex;
          flex-direction: column;
          -webkit-font-smoothing: antialiased;
          -moz-osx-font-smoothing: grayscale;
          overflow-x: hidden;
          /* Add some padding-top to prevent content from starting under the sticky header initially */
          /* This value should roughly match the initial un-scrolled header height */
          /* We can estimate based on padding + logo size. Let's try ~150px, adjust as needed */
          padding-top: 0; /* Adjust this value based on final header height */
      }

      /* ====== HERO / HEADER ====== */
      header {
          position: sticky;
          top: 0;
          left: 0;
          width: 100%;
          padding: clamp(0.8rem, 2vw, 1.2rem) 1rem;
          /* CHANGED: Use RGBA for transparency and apply backdrop filter */
          background: linear-gradient(135deg, rgba(var(--pink-1-rgb), 0.7), rgba(var(--pink-2-rgb), 0.7)); /* Adjust alpha (0.7) as needed */
          backdrop-filter: blur(16px); /* Glassmorphism effect */
          -webkit-backdrop-filter: blur(16px); /* Safari support */
          color: var(--txt-light);
          text-align: center;
          /* CHANGED: Subtle border for edge definition */
          border-bottom: 1px solid rgba(255, 255, 255, 0.15);
          /* Keep shadow for depth, slightly adjusted */
          box-shadow: 0 2px 10px rgba(100, 0, 50, 0.1);
          z-index: 100;
          transition: padding var(--transition-speed-fast) ease-out,
                      box-shadow var(--transition-speed-fast) ease-out,
                      background-color var(--transition-speed-fast) ease-out, /* Added background transition */
                      backdrop-filter var(--transition-speed-fast) ease-out; /* Added filter transition */
          will-change: padding, box-shadow, background-color, backdrop-filter;
      }

      .brand-wrap {
          max-width: 1280px;
          margin: 0 auto;
          display: flex;
          align-items: center;
          justify-content: center;
          padding: 0 env(safe-area-inset-left) 0 env(safe-area-inset-right);
          position: relative;
          z-index: 15;
          transition: transform var(--transition-speed-fast) ease-out;
      }

      .brand-wrap img {
          height: clamp(85px, 18vw, 140px);
          width: auto;
          /* Slightly enhanced shadow for better pop on glass */
          filter: drop-shadow(0 4px 8px rgba(0,0,0,0.3));
          transition: height var(--transition-speed-fast) ease-out;
      }

      /* -- Styles for Scrolled Header -- */
      body.scrolled header {
          padding: 0.4rem 1rem;
          /* Optional: Slightly increase opacity or blur on scroll */
          background: linear-gradient(135deg, rgba(var(--pink-1-rgb), 0.75), rgba(var(--pink-2-rgb), 0.75));
          backdrop-filter: blur(18px);
          -webkit-backdrop-filter: blur(18px);
          box-shadow: 0 6px 20px rgba(100, 0, 50, 0.2); /* Slightly stronger shadow */
          border-bottom: 1px solid rgba(255, 255, 255, 0.2); /* Slightly more visible border */
      }

      body.scrolled .brand-wrap img {
          height: clamp(75px, 15vw, 140px);
      }

      .social-links {
          position: absolute;
          /* Align with header top padding */
          top: 50%; /* Center vertically */
          transform: translateY(-50%); /* Fine-tune vertical centering */
          right: max(1.5rem, env(safe-area-inset-right)); /* Slightly more inset */
          display: flex;
          align-items: center;
          gap: 1rem;
          z-index: 110;
      }

      .social-links a {
          color: var(--txt-light);
          text-decoration: none;
          display: inline-flex; /* Use flex for better centering if needed */
          align-items: center;
          justify-content: center;
          font-size: 1.4rem; /* Slightly adjusted size */
          line-height: 1;
          transition: opacity var(--transition-speed-fast) ease-out, transform var(--transition-speed-fast) ease-out, color var(--transition-speed-fast) ease-out;
          /* CHANGED: Added subtle text shadow for contrast */
          text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
      }

      .social-links a:hover {
          opacity: 1; /* Full opacity on hover */
          transform: scale(1.15); /* Slightly larger hover scale */
          color: #fff; /* Ensure it stays bright white */
          text-shadow: 0 1px 4px rgba(0, 0, 0, 0.4); /* Enhance shadow slightly */
      }

      /* Adjust positioning when header shrinks */
      body.scrolled .social-links {
         /* Keep vertically centered */
         top: 50%;
         transform: translateY(-50%);
         /* No need to change top based on padding now */
      }

      /* ====== GRID WRAPPER ====== */
      main {
          flex: 1;
          /* REMOVED margin-top, handled by body padding-top */
          padding: 2rem max(1rem, env(safe-area-inset-left)) 3rem max(1rem, env(safe-area-inset-right));
          position: relative;
          z-index: 20; /* Below header */
          max-width: 1320px;
          margin-left: auto;
          margin-right: auto;
          width: 100%;
      }

      .grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(min(300px, 100%), 1fr));
          gap: clamp(1.5rem, 4vw, 2rem);
          min-height: 100px;
      }
      .grid p {
          grid-column: 1 / -1;
          text-align: center;
          padding: 2rem;
          color: var(--txt-dark);
          opacity: 0.8;
      }

      /* ====== CARD STYLES ====== */
      @keyframes pulse-bg {
          0% { background-position: -200% 0; }
          100% { background-position: 200% 0; }
      }

      .card {
          position: relative;
          border-radius: var(--radius);
          overflow: hidden;
          background-color: var(--bg-card);
          background-image: var(--bg-card-loading);
          background-size: 200% 100%;
          animation: pulse-bg 1.8s linear infinite;
          box-shadow: var(--shadow-base);
          opacity: 0;
          transform: translateY(30px) scale(0.98);
          transition: transform var(--transition-speed) var(--transition-ease),
                      opacity var(--transition-speed) ease-out,
                      box-shadow var(--transition-speed) var(--transition-ease);
          will-change: transform, opacity, box-shadow;
          -webkit-tap-highlight-color: transparent;
          min-height: 300px;
      }

      .card.loaded {
          animation: none;
          background-image: none;
          background-color: var(--bg-card);
      }

      .card.reveal {
          opacity: 1;
          transform: translateY(0) scale(1);
      }

      .card:active {
          @media (hover: none) {
              transform: scale(0.97);
              opacity: 0.9;
              transition-duration: var(--transition-speed-fast);
          }
      }

      .card blockquote.instagram-media {
          width: 100% !important;
          max-width: 100% !important;
          min-width: 0 !important;
          margin: 0 !important;
          padding: 0 !important;
          box-shadow: none !important;
          border: none !important;
          background: transparent !important;
          word-wrap: break-word;
          overflow-wrap: break-word;
          -webkit-hyphens: auto;
          -moz-hyphens: auto;
          hyphens: auto;
          display: block;
      }

      .card iframe.instagram-media {
          max-width: 100% !important;
          width: 100% !important;
          min-width: 0 !important;
          display: block;
      }

      @media (hover: hover) and (pointer: fine) {
          .card:hover {
              transform: translateY(-5px) scale(1.03);
              box-shadow: var(--shadow-hover);
          }
      }

      /* ====== FOOTER ====== */
      footer {
          background: linear-gradient(135deg, var(--pink-1), var(--pink-2));
          color: var(--txt-light);
          text-align: center;
          font-size: 0.9rem;
          padding: 1.2rem max(1rem, env(safe-area-inset-left)) 1.2rem max(1rem, env(safe-area-inset-right));
          margin-top: 2rem;
          text-shadow: 0 1px 2px rgba(0,0,0,0.15);
          position: relative;
          z-index: 50;
      }

      /* ====== RESPONSIVE TWEAKS ====== */
      @media (max-width: 600px) {
          body {
              /* Adjust body padding for smaller header on mobile */
              padding-top: 0px; /* Example value, adjust */
          }
          .grid {
              grid-template-columns: 1fr;
              gap: 1.5rem;
          }
          :root {
              --radius: 0.8rem;
          }
          header {
              /* Slightly less blur on mobile? Optional */
              backdrop-filter: blur(12px);
              -webkit-backdrop-filter: blur(12px);
          }
          body.scrolled header {
               backdrop-filter: blur(14px);
              -webkit-backdrop-filter: blur(14px);
          }
          .social-links {
              right: max(1rem, env(safe-area-inset-right)); /* Closer to edge */
              gap: 0.8rem;
          }
          .social-links a {
              font-size: 1.3rem;
          }
      }

      @media (max-width: 380px) {
         body {
              /* Adjust body padding for smaller header on mobile */
              padding-top: 120px; /* Example value, adjust */
          }
         .brand-wrap img { height: clamp(80px, 17vw, 140px); }
         body.scrolled .brand-wrap img { height: clamp(70px, 14vw, 140px); }
         .grid { gap: 1rem; }
      }
    </style>
  </head>
  <body>
    <!-- ===== HERO ===== -->
    <header>
      <div class="brand-wrap">
        <img src="logo3.2.png" alt="Logo Asia Vintage Star" />
      </div>

      <!-- CHANGED: Social Links using Font Awesome -->
      <div class="social-links">
        <a href="https://www.instagram.com/asiavintagestar" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <i class="fa-brands fa-instagram" title="Instagram"></i>
        </a>
        <a href="https://www.facebook.com/asiavintagestar" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
          <i class="fa-brands fa-facebook-f" title="Facebook"></i> <!-- Using fa-facebook-f for the square icon -->
        </a>
        <a href="https://www.tiktok.com/@asiavintagestar" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
          <i class="fa-brands fa-tiktok" title="TikTok"></i>
        </a>
      </div>
    </header>

    <!-- ===== GRID ===== -->
    <main>
      <div class="grid">
        <p>Loading posts...</p>
      </div>
    </main>

    <!-- ===== FOOTER ===== -->
    <footer>
      © <span id="year"></span> Asia Vintage Star — Todos os direitos
      reservados.
    </footer>

    <!-- Instagram embed loader -->
    <script async src="//www.instagram.com/embed.js"></script>

    <!-- SINGLE SCRIPT BLOCK FOR ALL LOGIC -->
    <script>
      // --- Global Variables & Elements ---
      const grid = document.querySelector('.grid');
      const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSwOoUC1FaaexqrEA6CtMnE46b4_5m28gSZUia3sm2mUUZA1EHxF-qHBwMSTFw0aR7o7N9rppNjmFLG/pub?gid=0&single=true&output=csv';
      let intersectionObserver; // Declare observer globally to manage it

      // --- Function to Load Posts from Google Sheet ---
      async function loadInstagramPosts() {
          // grid.innerHTML = '<p>Loading posts...</p>'; // Keep initial message
          try {
              const response = await fetch(sheetUrl);
              if (!response.ok) {
                  throw new Error(`HTTP error! status: ${response.status}`);
              }
              const csvData = await response.text();
              const rows = csvData.split(/\r?\n/).slice(1);
              rows.reverse();
              grid.innerHTML = ''; // Clear loading message

              let postsFound = false;
              rows.forEach(row => {
                  const columns = row.split(',');
                  const postUrl = columns[0] ? columns[0].trim() : null;
                  const isActive = columns[1] && columns[1].trim().toUpperCase() === 'SIM';

                  if (isActive && postUrl && postUrl.startsWith('https://www.instagram.com/')) {
                      postsFound = true;
                      const card = document.createElement('div');
                      card.className = 'card';

                      const blockquote = document.createElement('blockquote');
                      blockquote.className = 'instagram-media';
                      blockquote.setAttribute('data-instgrm-permalink', postUrl);
                      blockquote.setAttribute('data-instgrm-version', '14');
                      blockquote.innerHTML = ' ';

                      card.appendChild(blockquote);
                      grid.appendChild(card);
                  }
              });

              if (!postsFound && grid.innerHTML === '') {
                   grid.innerHTML = '<p>No posts to display right now.</p>';
              }

              if (window.instgrm) {
                  setTimeout(() => {
                     window.instgrm.Embeds.process();
                     setupCardObserver();
                  }, 100);
              } else {
                   setupCardObserver();
              }

          } catch (error) {
              console.error('Error loading Instagram posts:', error);
              grid.innerHTML = '<p>Could not load posts. Please check your connection or try again later.</p>';
          }
      }

      // --- Function to Setup Intersection Observer for Card Animations ---
      function setupCardObserver() {
          const cards = document.querySelectorAll('.card:not(.reveal)');
          if (cards.length === 0) return;

          const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
          const observerCallback = (entries, observer) => {
              entries.forEach((entry, index) => {
                  if (entry.isIntersecting) {
                      const card = entry.target;
                      const delay = index * 100;
                      card.style.transitionDelay = `${delay}ms`;
                      card.classList.add('reveal');

                      setTimeout(() => {
                          const instaEmbed = card.querySelector('.instagram-media iframe, .instagram-media .Embed');
                          if (instaEmbed || card.querySelector('blockquote').innerHTML.trim().length > 10) {
                              card.classList.add('loaded');
                          }
                      }, delay + 500);

                      observer.unobserve(card);
                  }
              });
          };

          if (intersectionObserver) {
              intersectionObserver.disconnect();
          }
          intersectionObserver = new IntersectionObserver(observerCallback, observerOptions);
          cards.forEach(card => intersectionObserver.observe(card));
      }

      // --- Header Shrink on Scroll Logic ---
      let lastScrollY = window.scrollY;
      let ticking = false;
      const handleScroll = () => {
          lastScrollY = window.scrollY;
          if (!ticking) {
              window.requestAnimationFrame(() => {
                  if (lastScrollY > 50) {
                      document.body.classList.add('scrolled');
                  } else {
                      document.body.classList.remove('scrolled');
                  }
                  ticking = false;
              });
              ticking = true;
          }
      };

      // --- Initial Setup on DOM Load ---
      document.addEventListener('DOMContentLoaded', () => {
          const yearSpan = document.getElementById('year');
          if(yearSpan) { yearSpan.textContent = new Date().getFullYear(); }
          loadInstagramPosts();
          window.addEventListener('scroll', handleScroll, { passive: true });
      });
    </script>
  </body>
</html>